{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center">Edit Medical Record for {{ record.patient.name }}</h1>
    <form method="POST" class="mt-4">

        <!-- Patient Demographics -->
        <div class="form-group">
            <label for="name">Full Name</label>
            <input type="text" id="name" name="name" class="form-control" value="{{ record.patient.name }}">
        </div>
        <div class="form-group mt-3">
            <label for="birthday">Date of Birth</label>
            <input type="date" id="birthday" name="birthday" class="form-control" value="{{ record.patient.birthday }}">
        </div>
        <div class="form-group mt-3">
            <label for="gender">Gender</label>
            <select id="gender" name="gender" class="form-control">
                <option {% if record.patient.gender == 'Male' %}selected{% endif %}>Male</option>
                <option {% if record.patient.gender == 'Female' %}selected{% endif %}>Female</option>
                <option {% if record.patient.gender == 'Other' %}selected{% endif %}>Other</option>
            </select>
        </div>

        <!-- Chief Complaint -->
        <div class="form-group mt-4">
            <label for="chief-complaint">Reason for Visit / Chief Complaint</label>
            <textarea id="chief-complaint" name="chief_complaint" class="form-control" rows="3">{{ record.chief_complaint }}</textarea>
        </div>

        <!-- Medical History -->
        <div class="form-group mt-4">
            <label for="medical-history">Medical History</label>
            <textarea id="medical-history" name="medical_history" class="form-control" rows="3">{{ record.medical_history }}</textarea>
        </div>

        <!-- Current Medications -->
        <div class="form-group mt-4">
            <label for="medications">Current Medications</label>
            <textarea id="medications" name="medications" class="form-control" rows="3">{{ record.medications }}</textarea>
        </div>

        <!-- Allergies -->
        <div class="form-group mt-4">
            <label for="allergies">Allergies</label>
            <textarea id="allergies" name="allergies" class="form-control" rows="3">{{ record.allergies }}</textarea>
        </div>

        <!-- Vital Signs -->
        <div class="form-group mt-4">
            <label for="vital-signs">Vital Signs</label>
            <textarea id="vital-signs" name="vital_signs" class="form-control" rows="3">{{ record.vital_signs }}</textarea>
        </div>

        <!-- Diagnosis -->
        <div class="form-group mt-4">
            <label for="diagnosis">Diagnosis</label>
            <textarea id="diagnosis" name="diagnosis" class="form-control" rows="3">{{ record.diagnosis }}</textarea>
        </div>

        <!-- Treatment Plan -->
        <div class="form-group mt-4">
            <label for="treatment">Treatment Plan</label>
            <textarea id="treatment" name="treatment_plan" class="form-control" rows="3">{{ record.treatment_plan }}</textarea>
        </div>

        <div class="text-center mt-4">
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <a href="{{ url_for('medical_records', patient_id=record.patient_id) }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
